app = "rsslay"

[experimental]
  enable_consul = true

[env]
  PORT = "8080"
  DB_DIR = "/var/lib/litefs/db"
  DEFAULT_PROFILE_PICTURE_URL = "https://i.imgur.com/MaceU96.png"
  REPLAY_TO_RELAYS = "true"
  RELAYS_TO_PUBLISH_TO = "wss://relay.nostrgraph.net,wss://offchain.pub,wss://nos.lol,wss://e.nos.lol,wss://nostr.mom"
  DEFAULT_WAIT_TIME_BETWEEN_BATCHES = "60000"
  DEFAULT_WAIT_TIME_FOR_RELAY_RESPONSE = "1000"
  MAX_EVENTS_TO_REPLAY = "10"
  MAIN_DOMAIN_NAME = "rsslay.nostr.moe"
  ENABLE_AUTO_NIP05_REGISTRATION = "true"
  OWNER_PUBLIC_KEY = "4ac24d2ee822a34a9881eff526bf71f39704419837e4c14b34642d82e111ed39"
  MAX_SUBROUTINES = 20
  INFO_RELAY_NAME = "rsslay public instance"
  INFO_CONTACT = "mailto:raul@piraces.dev"
  MAX_CONTENT_LENGTH = 5000
  VERSION = "0.4.4"

[[services]]
  internal_port = 8080
  protocol = "tcp"
  [services.concurrency]
    hard_limit = 50
    soft_limit = 40
    type = "connections"

  [[services.ports]]
    handlers = ["http"]
    port = 80
    force_https = true

  [[services.ports]]
    handlers = ["tls", "http"]
    port = "443"

[mounts]
  source="rsslay_data"
  destination="/var/lib/litefs"
